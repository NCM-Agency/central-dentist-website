---
// Contact Widget Component - Floating button with modal form
---

<!-- Floating Contact Button -->
<button
  id="contact-widget-btn"
  class="fixed bottom-6 right-6 bg-gradient-to-r from-[#0099ba] to-[#006786] text-white p-4 rounded-full shadow-lg hover:scale-110 transition-transform duration-300 z-40"
  aria-label="Contact Us"
>
  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
  </svg>
</button>

<!-- Contact Modal -->
<div
  id="contact-widget-modal"
  class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden"
>
  <div class="flex items-center justify-center min-h-screen p-4">
    <div class="bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto">
      <!-- Modal Header -->
      <div class="p-6 border-b border-gray-200">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-xl font-semibold text-gray-900">Contact Central Dentist</h3>
            <p class="text-sm text-gray-600 mt-1">We'll get back to you soon!</p>
          </div>
          <button
            id="close-widget-modal"
            class="text-gray-400 hover:text-gray-600"
            aria-label="Close"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>

      <!-- Modal Body with Form -->
      <div class="p-6">
        <form
          name="contact-widget"
          method="POST"
          data-netlify="true"
          netlify-honeypot="bot-field"
          action="/contact-success"
        >
          <!-- Hidden fields for Netlify -->
          <input type="hidden" name="form-name" value="contact-widget" />
          <div class="hidden">
            <label>Don't fill this out: <input name="bot-field" /></label>
          </div>

          <!-- Name Field -->
          <div class="mb-4">
            <label for="widget-name" class="block text-sm font-medium text-gray-700 mb-2">
              Name <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              id="widget-name"
              name="name"
              required
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0099ba] focus:border-transparent"
              placeholder="Your name"
            />
          </div>

          <!-- Email Field -->
          <div class="mb-4">
            <label for="widget-email" class="block text-sm font-medium text-gray-700 mb-2">
              Email <span class="text-red-500">*</span>
            </label>
            <input
              type="email"
              id="widget-email"
              name="email"
              required
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0099ba] focus:border-transparent"
              placeholder="your@email.com"
            />
          </div>

          <!-- Phone Field (Optional) -->
          <div class="mb-4">
            <label for="widget-phone" class="block text-sm font-medium text-gray-700 mb-2">
              Phone
            </label>
            <input
              type="tel"
              id="widget-phone"
              name="phone"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0099ba] focus:border-transparent"
              placeholder="(214) 555-0000"
            />
          </div>

          <!-- Message Field -->
          <div class="mb-6">
            <label for="widget-message" class="block text-sm font-medium text-gray-700 mb-2">
              Message <span class="text-red-500">*</span>
            </label>
            <textarea
              id="widget-message"
              name="message"
              required
              rows="4"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0099ba] focus:border-transparent"
              placeholder="How can we help you?"
            ></textarea>
          </div>

          <!-- Submit Button -->
          <button
            type="submit"
            class="w-full bg-gradient-to-r from-[#a6b443] to-[#c7cd85] text-white py-3 px-6 rounded-full font-semibold hover:shadow-lg transition-shadow duration-300"
          >
            Send Message
          </button>
        </form>

        <!-- Contact Info -->
        <div class="mt-6 pt-6 border-t border-gray-200 text-center">
          <p class="text-sm text-gray-600 mb-2">Or contact us directly:</p>
          <a href="tel:214-368-0900" class="text-[#0099ba] font-semibold hover:underline">
            (214) 368-0900
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Contact widget functionality
  document.addEventListener('DOMContentLoaded', function() {
    const btn = document.getElementById('contact-widget-btn');
    const modal = document.getElementById('contact-widget-modal');
    const closeBtn = document.getElementById('close-widget-modal');

    // Open modal
    btn?.addEventListener('click', () => {
      modal?.classList.remove('hidden');
      document.body.style.overflow = 'hidden'; // Prevent background scrolling
    });

    // Close modal
    closeBtn?.addEventListener('click', () => {
      modal?.classList.add('hidden');
      document.body.style.overflow = ''; // Restore scrolling
    });

    // Close on outside click
    modal?.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.classList.add('hidden');
        document.body.style.overflow = '';
      }
    });

    // Close on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !modal?.classList.contains('hidden')) {
        modal.classList.add('hidden');
        document.body.style.overflow = '';
      }
    });
  });
</script>

<style>
  /* Smooth transitions for modal */
  #contact-widget-modal {
    animation: fadeIn 0.2s ease-in-out;
  }

  #contact-widget-modal.hidden {
    animation: fadeOut 0.2s ease-in-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
  }
</style>