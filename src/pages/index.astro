---
// Homepage - Central Dentist
import Layout from '../layouts/Layout.astro';
import HeroSection from '../components/sections/HeroSection.astro';
import ServicesGrid from '../components/sections/ServicesGrid.astro';
import CTASection from '../components/sections/CTASection.astro';
import TestimonialsCarousel from '../components/sections/TestimonialsCarousel.astro';
import Card from '../components/ui/Card.astro';
import Button from '../components/ui/Button.astro';
import BlurFade from '../components/ui/BlurFade.astro';

// Import content data
import homepageData from '../content/homepage.json';
import servicesData from '../content/services.json';

// Get featured services (highlighted ones, sorted by priority)
const featuredServices = servicesData.services
  .filter(service => service.highlight)
  .sort((a, b) => a.priority - b.priority)
  .slice(0, 6)
  .map(service => ({
    title: service.title,
    description: service.shortDescription,
    href: `/services/${service.slug}`,
    image: service.image,
    imageAlt: service.imageAlt,
    features: service.features?.slice(0, 3), // Limit to 3 features for homepage
    highlight: service.highlight
  }));

// Get additional services to fill out the grid if needed
const additionalServices = servicesData.services
  .filter(service => !service.highlight)
  .sort((a, b) => a.priority - b.priority)
  .slice(0, Math.max(0, 6 - featuredServices.length))
  .map(service => ({
    title: service.title,
    description: service.shortDescription,
    href: `/services/${service.slug}`,
    image: service.image,
    imageAlt: service.imageAlt,
    features: service.features?.slice(0, 3),
    highlight: false
  }));

const displayServices = [...featuredServices, ...additionalServices];
---

<Layout 
  title="Home"
  description="Holistic Family Dentistry practice in Dallas, TX focusing on preventive and biocompatible oral health therapy addressing the root causes of disease."
  schemaType="MedicalBusiness"
>
  
  <!-- Hero Section -->
  <HeroSection
    mainTitle={homepageData.hero.mainTitle}
    tagline1={homepageData.hero.tagline1}
    tagline2={homepageData.hero.tagline2}
    boldSubhead={homepageData.hero.boldSubhead}
    description={homepageData.hero.description}
    primaryCTA={homepageData.hero.primaryCTA}
    secondaryCTA={homepageData.hero.secondaryCTA}
    backgroundVideo={homepageData.hero.backgroundVideo}
  />

  <!-- Why Holistic Dentistry Section -->
  <section class="section-padding bg-gradient-to-b from-teal-50 to-white relative overflow-hidden">
    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-5">
      <div class="absolute top-10 left-10 w-32 h-32 bg-teal rounded-full blur-3xl"></div>
      <div class="absolute bottom-20 right-20 w-40 h-40 bg-lime rounded-full blur-3xl"></div>
      <div class="absolute top-1/2 left-1/3 w-24 h-24 bg-teal-light rounded-full blur-2xl"></div>
    </div>
    
    <div class="container mx-auto container-padding relative">
      <BlurFade delay={100}>
        <div class="text-center mb-16">
          <h2 class="text-4xl md:text-5xl font-normal text-teal-dark" style="font-family: 'Playfair Display', serif;">
            <span data-gjs-editable="true">Why Choose Holistic Dentistry?</span>
          </h2>
          <p class="text-lg text-gray-600 mt-4">
            <span data-gjs-editable="true">Our approach can help with:</span>
          </p>
        </div>
      </BlurFade>

      <!-- Benefits Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10">
        {homepageData.aboutPreview.benefits.map((benefit, index) => (
          <BlurFade delay={200 + (index * 100)}>
            <div class="bg-white rounded-2xl p-8 text-center shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 group h-full flex flex-col">
              <!-- Icon -->
              <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-[#a6b443] to-[#c7cd85] rounded-2xl flex items-center justify-center group-hover:scale-110 transition-all duration-300">
                {benefit.icon === 'shield' && (
                  <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/>
                  </svg>
                )}
                {benefit.icon === 'moon' && (
                  <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
                  </svg>
                )}
                {benefit.icon === 'leaf' && (
                  <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"/>
                    <path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/>
                  </svg>
                )}
                {benefit.icon === 'heart' && (
                  <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7Z"/>
                  </svg>
                )}
                {benefit.icon === 'zap' && (
                  <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="13,2 3,14 12,14 11,22 21,10 12,10"/>
                  </svg>
                )}
                {benefit.icon === 'check' && (
                  <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="m9 12 2 2 4-4"/>
                  </svg>
                )}
              </div>
              
              <!-- Content -->
              <h3 class="text-card-header group-hover:text-teal-dark transition-colors mb-4">
                {benefit.title}
              </h3>
              <p class="text-body-regular text-gray-medium flex-grow">
                {benefit.description}
              </p>
              
            </div>
          </BlurFade>
        ))}
      </div>
      
      <!-- Removed unnecessary animation -->
    </div>
  </section>

  <!-- Services Section -->
  <ServicesGrid
    title="Our Services"
    subtitle="Comprehensive dental care addressing root causes"
    services={displayServices}
  />

  <!-- Meet Our Doctors Section -->
  <section class="section-padding bg-gradient-to-b from-white to-teal-50 relative">
    <!-- Subtle background pattern -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-20 right-10 w-64 h-64 bg-teal rounded-full blur-3xl"></div>
      <div class="absolute bottom-20 left-10 w-48 h-48 bg-lime rounded-full blur-3xl"></div>
    </div>
    
    <div class="container mx-auto container-padding relative">
      <div class="text-center mb-12">
        <h2 class="text-section-header text-header-primary">
          <span data-gjs-editable="true">{homepageData.doctors.title}</span>
        </h2>
        <p class="text-section-subheader">
          Our experienced team of holistic dental professionals
        </p>
      </div>

      <!-- Doctors Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-12 max-w-5xl mx-auto">
        {homepageData.doctors.doctors.map((doctor, index) => (
          <BlurFade delay={300 + (index * 150)}>
            <div class="bg-white rounded-3xl p-8 text-center group hover:shadow-2xl transition-all duration-300 border border-gray-100 hover:border-teal/20 hover:-translate-y-2 h-full flex flex-col">
              <!-- Professional headshot with enhanced styling -->
              <div class="relative w-48 h-48 mx-auto mb-6">
                <div class="absolute inset-0 bg-gradient-to-br from-teal to-teal-dark rounded-full opacity-20 group-hover:opacity-30 transition-opacity"></div>
                <div class="relative w-full h-full rounded-full overflow-hidden ring-4 ring-white shadow-xl">
                  <img 
                    src={doctor.image}
                    alt={doctor.name}
                    class="w-full h-full object-cover object-center transition-transform group-hover:scale-110 duration-300"
                    loading="lazy"
                  />
                </div>
              </div>
              
              <h3 class="text-card-header text-gray-900 group-hover:text-teal-dark transition-colors mb-3 min-h-[4rem] flex items-center justify-center">
                {doctor.name.split(',')[0]}
              </h3>
              <p class="text-body-regular text-gray-600 mb-6 min-h-[3rem] flex items-center justify-center flex-grow">
                {doctor.title}
              </p>

              <!-- Enhanced CTA button -->
              <a href={doctor.href} class="mt-auto inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-[#a6b443] to-[#c7cd85] text-white rounded-full font-semibold text-sm hover:from-[#8fa339] hover:to-[#a6b443] hover:shadow-lg hover:scale-105 transition-all duration-300">
                <span>Learn More</span>
                <svg class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </a>
            </div>
          </BlurFade>
        ))}
      </div>

      <!-- Learn More About History - Enhanced -->
      <div class="text-center mt-12">
        <a href="/our-office" class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-[#a6b443] to-[#c7cd85] text-white rounded-full font-semibold hover:from-[#8fa339] hover:to-[#a6b443] hover:shadow-lg hover:scale-105 transition-all duration-300">
          <svg class="mr-3 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
          </svg>
          Learn More about our history
        </a>
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <TestimonialsCarousel
    testimonials={homepageData.testimonials}
    title="What Our Patients Say"
  />

  <!-- Our Approach Section -->
  <section class="section-padding bg-gradient-to-b from-teal-50 to-white relative">
    <!-- Background decorative elements -->
    <div class="absolute inset-0 opacity-5">
      <div class="absolute top-1/3 left-1/4 w-80 h-80 bg-lime rounded-full blur-3xl"></div>
      <div class="absolute bottom-1/3 right-1/4 w-60 h-60 bg-teal rounded-full blur-3xl"></div>
    </div>
    
    <div class="container mx-auto container-padding relative">
      <div class="text-center mb-16">
        <h2 class="text-section-header text-header-primary">
          <span data-gjs-editable="true">How We Optimize Care</span>
        </h2>
        <p class="text-section-subheader">
          Comprehensive approach to holistic dental health
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12">
        {homepageData.approach.approaches.map((approach, index) => (
          <BlurFade delay={500 + (index * 150)}>
            <div class="bg-white rounded-3xl p-8 text-center shadow-lg hover:shadow-xl hover:-translate-y-2 transition-all duration-300 group h-full flex flex-col">
              <!-- Icon -->
              <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-[#a6b443] to-[#c7cd85] rounded-2xl flex items-center justify-center group-hover:scale-110 transition-all duration-300">
                {approach.title.includes('Diagnostics') && (
                  <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 2h6l4 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2Z"/>
                    <path d="M10 2v6h6"/>
                    <circle cx="10" cy="16" r="2"/>
                    <path d="m16 16-1.9-1.9"/>
                  </svg>
                )}
                {approach.title.includes('Preventive') && (
                  <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/>
                    <path d="m9 12 2 2 4-4"/>
                  </svg>
                )}
                {approach.title.includes('Collaboration') && (
                  <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                  </svg>
                )}
              </div>
              
              <!-- Enhanced image display -->
              <div class="aspect-video w-full mb-4 overflow-hidden rounded-2xl bg-gray-light">
                <img 
                  src={approach.image}
                  alt={approach.title}
                  class="w-full h-full object-cover transition-transform group-hover:scale-105 duration-300"
                  loading="lazy"
                />
              </div>
              
              <h3 class="text-card-header group-hover:text-teal-dark transition-colors mb-4">
                {approach.title}
              </h3>
              <p class="text-body-regular text-gray-medium mb-6 flex-grow">
                {approach.description}
              </p>
              
              <!-- Enhanced CTA button -->
              <a href={approach.href} class="btn-accent inline-flex items-center justify-center">
                <span>Learn More</span>
                <svg class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </a>
              
              <!-- Subtle animation line -->
              <div class="w-16 h-1 bg-gradient-to-r from-teal to-lime mx-auto mt-6 rounded-full transform scale-0 group-hover:scale-100 transition-transform duration-300"></div>
            </div>
          </BlurFade>
        ))}
      </div>
      
      <!-- Removed unnecessary animation -->
    </div>
  </section>

  <!-- Final CTA Section -->
  <CTASection
    variant="centered"
    title={homepageData.cta.title}
    description={homepageData.cta.description}
    primaryCTA={homepageData.cta.primaryCTA}
    secondaryCTA={homepageData.cta.secondaryCTA}
    backgroundColor="teal"
  />

</Layout>